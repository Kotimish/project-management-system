<!-- Спринты Проекты-->
<div class="project-sprints">
    <div class="col-12 d-flex justify-content-between align-items-center">
        <h2>Спринты</h2>
        <a href="/projects/{{ project.id }}/sprints/create" class="btn btn-primary">
            <i class="bi bi-plus-lg"></i> Добавить спринт
        </a>
    </div>
    {% if sprints %}
    <table class="table table-hover">
        <thead class="thead-light">
        <tr>
            <th>Название</th>
            <th>Даты</th>
            <th>Задачи (выполнено / всего)</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        {% for sprint in sprints %}
        <tr>
            <td>{{sprint.name or "Без названия"}}</td>
            <td>{{sprint.start_date}} — {{sprint.end_date}}</td>
            <td class="align-middle">
                {% if sprint.total_tasks > 0 %}
                {% set progress = (sprint.completed_tasks / sprint.total_tasks) * 100 %}
                {% else %}
                {% set progress = 0 %}
                {% endif %}
                <div class="progress position-relative" style="height: 20px;">
                    <div
                            class="progress-bar progress-bar-striped progress-bar-warning"
                            role="progressbar"
                            aria-valuenow="{{ progress | round(2) }}"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="width: {{ progress | round(2) }}%;"
                    ></div>
                    <div class="justify-content-center d-flex position-absolute w-100 h-100 align-items-center">
                        {{ progress | round(2) }}% ({{ sprint.completed_tasks }} / {{ sprint.total_tasks }})
                    </div>
                </div>
            </td>
            <td>
                <a href="/projects/{{ project.id }}/sprints/{{ sprint.id }}"
                   class="btn btn-sm btn-outline-secondary me-2"
                >
                    Детали
                </a>
                <a href="/projects/{{ project.id }}/sprints/{{ sprint.id }}/edit"
                   class="btn btn-sm btn-outline-secondary me-2"
                >
                    Редактировать
                </a>
                <a href="#" class="btn btn-sm btn-outline-danger">
                    Удалить
                </a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="row">
        <div class="col-12">
            <div class="alert alert-info">
                В проекте пока нет спринтов.
            </div>
        </div>
    </div>
    {% endif %}
</div>